{
    "contents" : "#load dplyr\nlibrary(\"dplyr\", lib.loc=\"/Library/Frameworks/R.framework/Versions/3.2/Resources/library\")\n\n#download UCI HAR dataset\nurlUcihar <- \"https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip\"\nif(!file.exists(\"./ucihar\")) {dir.create(\"./ucihar\")}\ndownload.file(urlUcihar, destfile = \"./ucihar/dataset.zip\", method = \"curl\")\ndataZip <- \"./ucihar/dataset.zip\"\nunzip(dataZip,exdir = \"./ucihar\")\n\nrm(urlUcihar)\nrm(dataZip)\n\n#open the three files each for test and train \nxtestFile <- read.delim(\"./ucihar/UCI HAR Dataset/test/X_test.txt\", header = FALSE, sep = \"\\t\", stringsAsFactors = FALSE)\nytestFile <- read.delim(\"./ucihar/UCI HAR Dataset/test/y_test.txt\", header = FALSE, sep = \"\\t\")\nsubjectTestFile <- read.delim(\"./ucihar/UCI HAR Dataset/test/subject_test.txt\", header = FALSE, sep = \"\\t\")\nxtrainFile <- read.delim(\"./ucihar/UCI HAR Dataset/train/X_train.txt\", header = FALSE, sep = \"\\t\", stringsAsFactors = FALSE)\nytrainFile <- read.delim(\"./ucihar/UCI HAR Dataset/train/y_train.txt\", header = FALSE, sep = \"\\t\")\nsubjectTrainFile <- read.delim(\"./ucihar/UCI HAR Dataset/train/subject_train.txt\", header = FALSE, sep = \"\\t\")\n\n#unpack the numeric data fom lists within lists\nunpackList <- function(x) {\n  lengthTest <- length(x[[1]])\n  meanTest <- vector(\"numeric\",lengthTest)\n  sdTest <- vector(\"numeric\",lengthTest)\n  for (i in 1:lengthTest) {\n    lineTest <- x[[1]][[i]]\n    parseTest <- strsplit(lineTest[[1]],\"\\\\s\")\n    vectorTest <- as.vector(strsplit(parseTest[[1]],\"\\\\s\"),\"numeric\")\n    meanTest[i] <- mean(vectorTest,na.rm = TRUE)\n    sdTest[i] <- sd(vectorTest,na.rm = TRUE)\n  }\n  resultTest <- data.frame(meanTest,sdTest)\n  return(resultTest)\n}\n\nxTestUnpack <- unpackList(xtestFile)\nxTrainUnpack <- unpackList(xtrainFile)\n\nrm(xtestFile)\nrm(xtrainFile)\nrm(unpackList)\n\n#create one file from each set of test files and train files\ntestFile <- data.frame(measurements = ytestFile, activity = xTestUnpack, subject = subjectTestFile)\ntrainFile <- data.frame(measurements = ytrainFile, activity = xTrainUnpack, subject = subjectTrainFile)\nnames(testFile) <- c(\"activity_type\",\"activity_mean\",\"activity_standard_deviation\", \"subject\")\nnames(trainFile) <- c(\"activity_type\",\"activity_mean\",\"activity_standard_deviation\", \"subject\")\n\nrm(xTestUnpack)\nrm(xTrainUnpack)\nrm(ytestFile)\nrm(ytrainFile)\nrm(subjectTestFile)\nrm(subjectTrainFile)\n\n#combine the test file and train file into one file\ndataFile <- rbind(testFile,trainFile)\ndataFile$activity_type <- as.factor(dataFile$activity_type)\n\nrm(testFile)\nrm(trainFile)\n\n#label the activities\nsortDataFile <- arrange(dataFile, activity_type)\nrm(dataFile)\n\nactivityLabels <- read.delim(\"./ucihar/UCI HAR Dataset/activity_labels.txt\", header = FALSE, sep = \"\\t\")\nlevels(sortDataFile$activity_type) <- activityLabels[[1]]\n\nrm(activityLabels)\n\n#summarize data grouped by subject and activities\noutputCount <- table(sortDataFile$subject,sortDataFile$activity_type)\noutputSum <- xtabs(activity_mean ~ subject + activity_type, data = sortDataFile)\noutputTable <- outputSum / outputCount\n\nrm(sortDataFile)\nrm(outputSum)\nrm(outputCount)\n\n#save output to text file\nwrite.table(outputTable,\"./ucihar/harSummary.txt\")\n\nrm(outputTable)",
    "created" : 1454285600395.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3415324179",
    "id" : "6E18A237",
    "lastKnownWriteTime" : 1454285616,
    "path" : "~/Documents/Coursera/wk4Project/run_analysis/run_analysis.R",
    "project_path" : "run_analysis.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}